(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7514:(e,s,t)=>{Promise.resolve().then(t.bind(t,2765))},2765:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>e1});var a=t(5155),r=t(2115),i=t(7849);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});n.displayName="Card";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});o.displayName="CardTitle",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",t),...r})});d.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter";var c=t(2317),m=t(652);let u=(0,m.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,asChild:l=!1,...o}=e,d=l?c.DX:"button";return(0,a.jsx)(d,{className:(0,i.cn)(u({variant:r,size:n,className:t})),ref:s,...o})});f.displayName="Button";let p=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...n})});p.displayName="Input";var h=t(1902),x=t(1719);let g=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,i.cn)("w-full caption-bottom text-sm",t),...r})})});g.displayName="Table";let j=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("thead",{ref:s,className:(0,i.cn)("[&_tr]:border-b",t),...r})});j.displayName="TableHeader";let y=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tbody",{ref:s,className:(0,i.cn)("[&_tr:last-child]:border-0",t),...r})});y.displayName="TableBody",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tfoot",{ref:s,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})}).displayName="TableFooter";let b=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("tr",{ref:s,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});b.displayName="TableRow";let v=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("th",{ref:s,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r})});v.displayName="TableHead";let N=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("td",{ref:s,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r})});N.displayName="TableCell",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("caption",{ref:s,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",t),...r})}).displayName="TableCaption";var w=t(1014),k=t(8867);let C=w.bL;w.YJ;let S=w.WT,E=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(w.l9,{ref:s,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[r,(0,a.jsx)(w.In,{asChild:!0,children:(0,a.jsx)(x.A,{className:"h-4 w-4 opacity-50"})})]})});E.displayName=w.l9.displayName;let R=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(w.PP,{ref:s,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(h.A,{className:"h-4 w-4"})})});R.displayName=w.PP.displayName;let A=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(w.wn,{ref:s,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(x.A,{className:"h-4 w-4"})})});A.displayName=w.wn.displayName;let P=r.forwardRef((e,s)=>{let{className:t,children:r,position:n="popper",...l}=e;return(0,a.jsx)(w.ZL,{children:(0,a.jsxs)(w.UC,{ref:s,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...l,children:[(0,a.jsx)(R,{}),(0,a.jsx)(w.LM,{className:(0,i.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(A,{})]})})});P.displayName=w.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(w.JU,{ref:s,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=w.JU.displayName;let T=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(w.q7,{ref:s,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(w.VF,{children:(0,a.jsx)(k.A,{className:"h-4 w-4"})})}),(0,a.jsx)(w.p4,{children:r})]})});function z(){return(0,a.jsx)("div",{className:"relative w-full overflow-hidden",children:(0,a.jsxs)("div",{className:"w-full space-y-4",children:[(0,a.jsx)("div",{className:"h-10 w-full rounded-md bg-muted before:absolute before:inset-0 before:-translate-x-full before:animate-[shimmer_2s_infinite] before:bg-gradient-to-r before:from-transparent before:via-white/60 before:to-transparent"}),[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"h-16 w-full rounded-md bg-muted before:absolute before:inset-0 before:-translate-x-full before:animate-[shimmer_2s_infinite] before:bg-gradient-to-r before:from-transparent before:via-white/60 before:to-transparent"},s))]})})}function U(e){let{data:s,columns:t,isLoading:r,sortConfig:i,onSort:n,currentPage:l,totalPages:o,onPageChange:d,pageSize:c,onPageSizeChange:m,totalItems:u}=e,p=e=>(null==i?void 0:i.key)!==e?null:"asc"===i.direction?(0,a.jsx)(h.A,{className:"ml-1 h-4 w-4"}):(0,a.jsx)(x.A,{className:"ml-1 h-4 w-4"});return r?(0,a.jsx)(z,{className:"ease-in-out"}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Showing ",Math.min((l-1)*c+1,u)," to"," ",Math.min(l*c,u)," of ",u," ","entries"]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"Show"}),(0,a.jsxs)(C,{value:c.toString(),onValueChange:e=>m(Number(e)),children:[(0,a.jsx)(E,{className:"w-20",children:(0,a.jsx)(S,{})}),(0,a.jsx)(P,{children:[1,10,25,50,100].map(e=>(0,a.jsx)(T,{value:e.toString(),children:e},e))})]}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"entries"})]})]}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(g,{children:[(0,a.jsx)(j,{children:(0,a.jsx)(b,{children:t.map(e=>(0,a.jsx)(v,{className:e.sortable?"cursor-pointer select-none":"",onClick:()=>e.sortable&&n(e.key),children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.label,e.sortable&&p(e.key)]})},e.key))})}),(0,a.jsx)(y,{children:(null==s?void 0:s.length)>0?s.map((e,s)=>(0,a.jsx)(b,{children:t.map(s=>(0,a.jsx)(N,{children:s.render?s.render(e):e[s.key]},s.key))},s)):(0,a.jsx)(b,{children:(0,a.jsx)(N,{colSpan:t.length,className:"text-center py-4",children:"No data available"})})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(f,{variant:"outline",size:"sm",onClick:()=>d(l-1),disabled:l<=1,children:"Previous"}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:[...Array(o)].map((e,s)=>(0,a.jsx)(f,{variant:l===s+1?"default":"outline",size:"sm",onClick:()=>d(s+1),children:s+1},s+1))}),(0,a.jsx)(f,{variant:"outline",size:"sm",onClick:()=>d(l+1),disabled:l>=o,children:"Next"})]})]})}T.displayName=w.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(w.wv,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=w.wv.displayName;var F=t(6217),_=t(767);let O=F.bL;F.l9;let L=F.ZL;F.bm;let D=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(F.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});D.displayName=F.hJ.displayName;let M=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(L,{children:[(0,a.jsx)(D,{}),(0,a.jsxs)(F.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[r,(0,a.jsxs)(F.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(_.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});M.displayName=F.UC.displayName;let I=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...t})};I.displayName="DialogHeader";let V=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(F.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});V.displayName=F.hE.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(F.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})}).displayName=F.VY.displayName;var J=t(6195);let q=(0,m.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Y=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(J.b,{ref:s,className:(0,i.cn)(q(),t),...r})});Y.displayName=J.b.displayName;var Z=t(9398),H=t(7594);let G=e=>{let{isOpen:s,onClose:t,onAdd:i,roles:n,initialData:l=null}=e,[o,d]=(0,r.useState)({name:"",email:"",role:"",status:"Active"}),[c,m]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),{toast:x}=(0,Z.dj)();(0,r.useEffect)(()=>{if(l){var e;d({...l,role:(null===(e=l.role)||void 0===e?void 0:e.id)||""}),m(!0)}else d({name:"",email:"",role:"",status:"Active"}),m(!1)},[l]),(0,r.useEffect)(()=>{s||(d({name:"",email:"",role:"",status:"Active"}),m(!1))},[s]);let g=async()=>{if(!o.name||!o.email||!o.role){x({title:"Error",description:"Name, Email, and Role are required",variant:"destructive"});return}h(!0);try{await i(o)&&(x({title:"Success",description:'User "'.concat(o.name,'" ').concat(c?"updated":"added"," successfully"),variant:"default",className:"bg-green-500 text-white"}),t())}catch(e){x({title:"Error",description:"Failed to ".concat(c?"update":"add"," user: ").concat(e.message),variant:"destructive"})}finally{h(!1)}};return(0,a.jsx)(O,{open:s,onOpenChange:t,children:(0,a.jsxs)(M,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(I,{children:(0,a.jsx)(V,{children:c?"Edit User":"Add New User"})}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(Y,{htmlFor:"name",className:"text-right",children:"Name"}),(0,a.jsx)(p,{id:"name",value:o.name,onChange:e=>d({...o,name:e.target.value}),className:"col-span-3",required:!0,placeholder:"Enter user name"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(Y,{htmlFor:"email",className:"text-right",children:"Email"}),(0,a.jsx)(p,{id:"email",type:"email",value:o.email,onChange:e=>d({...o,email:e.target.value}),className:"col-span-3",required:!0,placeholder:"Enter user email"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(Y,{htmlFor:"role",className:"text-right",children:"Role"}),(0,a.jsxs)(C,{value:o.role,onValueChange:e=>d({...o,role:e}),children:[(0,a.jsx)(E,{className:"col-span-3",children:(0,a.jsx)(S,{placeholder:"Select a role"})}),(0,a.jsx)(P,{children:0===n.length?(0,a.jsx)(T,{value:"no-roles",disabled:!0,children:"Please add a role first"}):n.map(e=>(0,a.jsx)(T,{value:e.id,children:e.name},e.id))})]})]})]}),(0,a.jsx)(f,{onClick:g,disabled:!o.name||!o.email||!o.role||u,children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.A,{className:"mr-2 h-4 w-4 animate-spin"}),c?"Updating...":"Adding..."]}):c?"Update User":"Add User"})]})})},Q=e=>{let{user:s,onUpdate:t,onDelete:r}=e,i=async()=>{var e;let a={...s,status:"Active"===s.status?"Inactive":"Active",role:(null===(e=s.originalRole)||void 0===e?void 0:e.id)||s.role};await t(a)},n=async()=>{window.confirm("Are you sure you want to delete this user?")&&await r(s.id)};return(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(f,{variant:"outline",size:"sm",onClick:i,children:"Active"===s.status?"Deactivate":"Activate"}),(0,a.jsx)(f,{variant:"destructive",size:"sm",onClick:n,children:"Delete"})]})},B="/api",K={async fetchUsers(){try{let e=await fetch("".concat(B,"/users"));if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return await e.json()}catch(e){throw Error("Failed to fetch users: ".concat(e.message))}},async addUser(e){try{let s=await fetch("".concat(B,"/users"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to add user")}return await s.json()}catch(e){throw Error("Failed to add user: ".concat(e.message))}},async updateUser(e,s){try{let t=await fetch("".concat(B,"/users/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok){let e=await t.json();throw Error(e.message||"Failed to update user")}return await t.json()}catch(e){throw Error("Failed to update user: ".concat(e.message))}},async deleteUser(e){try{let s=await fetch("".concat(B,"/users/").concat(e),{method:"DELETE"});if(!s.ok){let e=await s.json();throw Error(e.message||"Failed to delete user")}return await s.json()}catch(e){throw Error("Failed to delete user: ".concat(e.message))}}},X=()=>{let[e,s]=(0,r.useState)([]),[t,a]=(0,r.useState)(!1),[i,n]=(0,r.useState)(null),{toast:l}=(0,Z.dj)(),o=async()=>{try{a(!0);let e=await K.fetchUsers();console.log(e),s(e)}catch(e){n(e.message),console.error("Error fetching users:",e),l({title:"Error",description:"Failed to fetch users",variant:"destructive"})}finally{a(!1)}},d=async e=>{try{return a(!0),await K.addUser(e),await o(),l({title:"Success",description:"User added successfully",variant:"default",className:"bg-green-500 text-white"}),!0}catch(e){return n(e.message),console.error("Error adding user:",e),l({title:"Error",description:"Failed to add user: ".concat(e.message),variant:"destructive"}),!1}finally{a(!1)}},c=async e=>{try{return a(!0),await K.updateUser(e.id,e),await o(),l({title:"Success",description:"User updated successfully",variant:"default",className:"bg-green-500 text-white"}),!0}catch(e){return n(e.message),console.error("Error updating user:",e),l({title:"Error",description:"Failed to update user: ".concat(e.message),variant:"destructive"}),!1}finally{a(!1)}},m=async e=>{try{return a(!0),await K.deleteUser(e),await o(),l({title:"Success",description:"User deleted successfully",variant:"default",className:"bg-green-500 text-white"}),!0}catch(e){return n(e.message),console.error("Error deleting user:",e),l({title:"Error",description:"Failed to delete user: ".concat(e.message),variant:"destructive"}),!1}finally{a(!1)}};return(0,r.useEffect)(()=>{o()},[]),{users:e,isLoading:t,error:i,addUser:d,updateUser:c,deleteUser:m,fetchUsers:o}},W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{key:"name",direction:"asc"},[t,a]=(0,r.useState)(s),[i,n]=(0,r.useState)(1),[l,o]=(0,r.useState)(10),[d,c]=(0,r.useState)(""),m=(0,r.useMemo)(()=>{if(!d)return e;let s=d.toLowerCase();return e.filter(e=>e.name.toLowerCase().includes(s)||e.email.toLowerCase().includes(s))},[e,d]),u=(0,r.useMemo)(()=>t.key?[...m].sort((e,s)=>{let a=e[t.key],r=s[t.key];return"string"==typeof a?"asc"===t.direction?a.localeCompare(r):r.localeCompare(a):"asc"===t.direction?a>r?1:-1:a<r?1:-1}):m,[m,t]),f=(0,r.useMemo)(()=>{let e=(i-1)*l;return u.slice(e,e+l)},[u,i,l]),p=m.length,h=Math.ceil(p/l);return{data:f,sortConfig:t,currentPage:i,pageSize:l,totalItems:p,totalPages:h,searchTerm:d,handleSort:e=>{a(s=>({key:e,direction:s.key===e&&"asc"===s.direction?"desc":"asc"})),n(1)},handlePageChange:e=>{n(e)},handlePageSizeChange:e=>{o(e),n(1)},handleSearch:e=>{c(e),n(1)}}},$="/api",ee={async fetchRoles(){let e=await fetch("".concat($,"/roles"));if(!e.ok)throw Error("Failed to fetch roles");return await e.json()},async addRole(e){let s=await fetch("".concat($,"/roles"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.name,permissions:e.permissions})});if(!s.ok)throw Error((await s.json()).message||"Failed to add role");return await s.json()},async updateRole(e,s){let t=await fetch("".concat($,"/roles/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name,permissions:s.permissions})});if(!t.ok)throw Error((await t.json()).message||"Failed to update role");return await t.json()},async deleteRole(e){let s=await fetch("".concat($,"/roles/").concat(e),{method:"DELETE"});if(!s.ok)throw Error((await s.json()).message||"Failed to delete role");return!0}},es=()=>{let[e,s]=(0,r.useState)([]),[t,a]=(0,r.useState)(!1),[i,n]=(0,r.useState)(null),{toast:l}=(0,Z.dj)(),o=async()=>{try{a(!0);let e=await ee.fetchRoles();s(e)}catch(e){n(e.message),console.error("Error fetching roles:",e),l({title:"Error",description:"Failed to fetch roles",variant:"destructive"})}finally{a(!1)}},d=async e=>{try{a(!0);let t=await ee.addRole(e);return s(e=>[...e,t]),t}catch(e){throw n(e.message),l({title:"Error",description:e.message||"Failed to add role",variant:"destructive"}),e}finally{a(!1)}},c=async e=>{try{a(!0);let t=await ee.updateRole(e.id,e);return s(e=>e.map(e=>e.id===t.id?t:e)),t}catch(e){n(e.message),l({title:"Error",description:e.message||"Failed to update role",variant:"destructive"}),console.log(e)}finally{a(!1)}},m=async e=>{try{a(!0),await ee.deleteRole(e.id),s(s=>s.filter(s=>s.id!==e.id)),l({title:"Success",description:"Role deleted successfully",variant:"default",className:"bg-green-500 text-white"})}catch(e){throw n(e.message),l({title:"Error",description:e.message||"Failed to delete role",variant:"destructive"}),e}finally{a(!1)}};return(0,r.useEffect)(()=>{o()},[]),{roles:e,isLoading:t,error:i,addRole:d,updateRole:c,deleteRole:m}};var et=t(853);function ea(){let[e,s]=(0,r.useState)(!1),[t,i]=(0,r.useState)(!1),c=(0,r.useRef)(null),{users:m,isLoading:u,addUser:h,updateUser:x,deleteUser:g}=X(),{roles:j,isLoading:y}=es(),{data:b,sortConfig:v,currentPage:N,pageSize:w,totalItems:k,totalPages:C,searchTerm:S,handleSort:E,handlePageChange:R,handlePageSizeChange:A,handleSearch:P}=W(m.map(e=>{var s;return{...e,id:e.id,originalRole:e.role,role:(null===(s=e.role)||void 0===s?void 0:s.name)||"No Role"}})),T=[{key:"name",label:"Name",sortable:!0},{key:"email",label:"Email",sortable:!1},{key:"role",label:"Role",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"actions",label:"Actions",sortable:!1,render:e=>(0,a.jsx)(Q,{user:{...e,role:e.originalRole},onUpdate:x,onDelete:g})}];return(0,r.useEffect)(()=>{t&&c.current&&c.current.focus()},[t]),(0,a.jsxs)(n,{children:[(0,a.jsxs)(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(o,{className:"text-2xl font-bold",children:"User Management"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(t?"w-64 mr-2":"w-0"),children:(0,a.jsx)(p,{ref:c,placeholder:"Search by name or email",value:S,onChange:e=>P(e.target.value),className:"w-full"})}),(0,a.jsx)(f,{variant:"ghost",size:"icon",onClick:()=>{i(!t)},"aria-label":"Search",children:(0,a.jsx)(et.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(f,{onClick:()=>s(!0),children:"Add User"})]})]}),(0,a.jsxs)(d,{children:[S&&(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Search Results"}),(0,a.jsx)(U,{data:b,columns:T,isLoading:u||y,sortConfig:v,onSort:E,currentPage:N,totalPages:C,onPageChange:R,pageSize:w,onPageSizeChange:A,totalItems:k})]}),(0,a.jsx)(G,{isOpen:e,onClose:()=>s(!1),onAdd:h,roles:j})]})}var er=t(3572);let ei=er.bL;er.l9;let en=er.ZL,el=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(er.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s})});el.displayName=er.hJ.displayName;let eo=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsxs)(en,{children:[(0,a.jsx)(el,{}),(0,a.jsx)(er.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]})});eo.displayName=er.UC.displayName;let ed=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};ed.displayName="AlertDialogHeader";let ec=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};ec.displayName="AlertDialogFooter";let em=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(er.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold",t),...r})});em.displayName=er.hE.displayName;let eu=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(er.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});eu.displayName=er.VY.displayName;let ef=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(er.rc,{ref:s,className:(0,i.cn)(u(),t),...r})});ef.displayName=er.rc.displayName;let ep=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(er.ZD,{ref:s,className:(0,i.cn)(u({variant:"outline"}),"mt-2 sm:mt-0",t),...r})});ep.displayName=er.ZD.displayName;let eh=e=>{let{role:s,onUpdate:t,onDelete:i}=e,[n,l]=(0,r.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(f,{variant:"outline",size:"sm",onClick:()=>t(s),children:"Edit"}),(0,a.jsx)(f,{variant:"destructive",size:"sm",onClick:()=>l(!0),children:"Delete"})]}),(0,a.jsx)(ei,{open:n,onOpenChange:l,children:(0,a.jsxs)(eo,{children:[(0,a.jsxs)(ed,{children:[(0,a.jsx)(em,{children:"Are you sure you want to delete this permission?"}),(0,a.jsxs)(eu,{children:['This action cannot be undone. This will permanently delete the role "',s.name,"“ and remove it from our servers."]})]}),(0,a.jsxs)(ec,{children:[(0,a.jsx)(ep,{children:"Cancel"}),(0,a.jsx)(ef,{onClick:()=>{i(s),l(!1)},children:"Delete"})]})]})})]})};var ex=t(6352);let eg=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(ex.bL,{ref:s,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:(0,a.jsx)(ex.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(k.A,{className:"h-4 w-4"})})})});eg.displayName=ex.bL.displayName;var ej=t(8617),ey=t(9710);let eb=ey.Kq,ev=ey.bL,eN=ey.l9,ew=r.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...n}=e;return(0,a.jsx)(ey.UC,{ref:s,sideOffset:r,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})});ew.displayName=ey.UC.displayName;let ek="/api",eC={async fetchPermissions(){let e=await fetch("".concat(ek,"/permissions"));if(!e.ok)throw Error("Failed to fetch permissions");return e.json()},async addPermission(e){console.log(e);try{let s=await fetch("".concat(ek,"/permissions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({group:e.group,permissions:[{name:e.permissions[0].name,description:e.permissions[0].description}]})});if(!s.ok){let e=await s.text();throw Error("Failed to add permission: ".concat(e))}return s.json()}catch(e){throw console.error("Error in addPermission:",e),e}},async updatePermission(e){let{group:s,permissionId:t,permissions:a}=e;console.log(a);let r=await fetch("".concat(ek,"/permissions/").concat(s.id,"/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a[0].name,description:a[0].description})});if(!r.ok)throw Error((await r.json()).message||"Failed to update permission");return r.json()},async deletePermission(e,s){try{let t=await fetch("".concat(ek,"/permissions/").concat(e,"/").concat(s),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.message||"Failed to delete permission")}return await t.json()}catch(e){throw console.error("Delete permission error:",e),e}}},eS=()=>{let[e,s]=(0,r.useState)([]),[t,a]=(0,r.useState)(!1),[i,n]=(0,r.useState)(null),l=async()=>{try{a(!0);let e=await eC.fetchPermissions();s(e)}catch(e){n(e.message),console.error("Error fetching permissions:",e)}finally{a(!1)}},o=e=>{let s=new Map;return e.forEach(e=>{if(s.has(e.group)){let t=s.get(e.group),a=[...t.permissions,...e.permissions.filter(e=>!t.permissions.some(s=>s.name===e.name))];s.set(e.group,{...t,permissions:a})}else s.set(e.group,e)}),Array.from(s.values())},d=async e=>{try{a(!0);let t=await eC.addPermission(e),r=await eC.fetchPermissions(),i=o(r);return s(i),t}catch(e){n(e.message),console.error("Error adding permission:",e)}finally{a(!1)}},c=async e=>{console.log("updatedPermission :",e);try{a(!0);let t=await eC.updatePermission(e),r=await eC.fetchPermissions();return s(r),t}catch(e){n(e.message),console.error("Error updating permission:",e),s(await eC.fetchPermissions())}finally{a(!1)}},m=async(e,t)=>{try{a(!0);let r=await eC.deletePermission(e,t),i=await eC.fetchPermissions();return s(i),r}catch(e){s(await eC.fetchPermissions()),n(e.message),console.error("Error deleting permission:",e)}finally{a(!1)}};return(0,r.useEffect)(()=>{l()},[]),{permissions:e,isLoading:t,error:i,addPermission:d,updatePermission:c,deletePermission:m}};function eE(e){let{isOpen:s,onClose:t,onAdd:i,onUpdate:n,roleToEdit:l=null}=e,[o,d]=(0,r.useState)({name:"",permissions:[]}),{permissions:c,isLoading:m}=eS(),[u,h]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),{toast:j}=(0,Z.dj)();(0,r.useEffect)(()=>{l&&(d({id:l.id,name:l.name,permissions:Array.isArray(l.permissions)?l.permissions.map(e=>"object"==typeof e?e.name:e):[]}),h(!0))},[l]),(0,r.useEffect)(()=>{s||(d({name:"",permissions:[]}),h(!1))},[s]);let y=e=>{for(let s of c){let t=s.permissions.find(s=>s.name===e);if(t)return t.description}return"No description available"},b=async()=>{if(!o.name){j({title:"Error",description:"Role name is required",variant:"destructive"});return}g(!0);try{let e={name:o.name,permissions:o.permissions.map(e=>{for(let s of c){let t=s.permissions.find(s=>s.name===e);if(t)return t._id}return null}).filter(e=>null!==e)};u?await n({...e,id:o.id}):await i(e),t(),j({title:"Success",description:"Role ".concat(u?"updated":"created"," successfully"),variant:"default",className:"bg-green-500 text-white"})}catch(e){j({title:"Error",description:e.message,variant:"destructive"})}finally{g(!1)}},v=e=>{d(s=>({...s,permissions:s.permissions.includes(e)?s.permissions.filter(s=>s!==e):[...s.permissions,e]}))},N=(e,s)=>{let t=s.every(e=>o.permissions.includes(e));d(e=>({...e,permissions:t?e.permissions.filter(e=>!s.includes(e)):[...new Set([...e.permissions,...s])]}))};return m?(0,a.jsx)(O,{open:s,onOpenChange:t,children:(0,a.jsx)(M,{children:"Loading permissions..."})}):(0,a.jsx)(O,{open:s,onOpenChange:t,children:(0,a.jsxs)(M,{className:"sm:max-w-[600px] max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)(I,{children:(0,a.jsx)(V,{children:u?"Edit Role":"Add New Role"})}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(Y,{htmlFor:"name",className:"text-right",children:"Role Name"}),(0,a.jsx)(p,{id:"name",value:o.name,onChange:e=>d({...o,name:e.target.value}),className:"col-span-3",placeholder:"Enter role name",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-start gap-4",children:[(0,a.jsx)(Y,{className:"text-right",children:"Permissions"}),(0,a.jsx)("div",{className:"col-span-3 space-y-4",children:Object.entries((()=>{let e={};return c.forEach(s=>{e[s.group.toLowerCase().replace(/\s/g,"_")]=s.permissions.map(e=>e.name)}),e})()).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"border p-4 rounded-lg dark:border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold capitalize",children:s.replace(/_/g," ")}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eg,{id:"select-all-".concat(s),checked:t.every(e=>o.permissions.includes(e)),onCheckedChange:()=>N(s,t)}),(0,a.jsx)("label",{htmlFor:"select-all-".concat(s),className:"text-sm",children:"Select All"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eg,{id:e,checked:o.permissions.includes(e),onCheckedChange:()=>v(e)}),(0,a.jsx)("label",{htmlFor:e,className:"capitalize text-sm",children:e.replace(/_/g," ")}),(0,a.jsx)(eb,{delayDuration:500,children:(0,a.jsxs)(ev,{children:[(0,a.jsx)(eN,{asChild:!0,children:(0,a.jsx)(f,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0",onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,a.jsx)(ej.A,{className:"h-4 w-4 text-muted-foreground"})})}),(0,a.jsx)(ew,{children:(0,a.jsx)("p",{children:y(e)})})]})})]},e))})]},s)})})]})]}),(0,a.jsx)(f,{onClick:b,disabled:!o.name||x,children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.A,{className:"mr-2 h-4 w-4 animate-spin"}),u?"Updating...":"Adding..."]}):u?"Update Role":"Add Role"})]})})}function eR(){let[e,s]=(0,r.useState)(!1),[t,i]=(0,r.useState)(!1),[c,m]=(0,r.useState)(null),{roles:u,isLoading:h,addRole:x,updateRole:g,deleteRole:j}=es(),{permissions:y,isLoading:b}=eS(),{data:v,sortConfig:N,currentPage:w,pageSize:k,totalItems:C,totalPages:S,searchTerm:E,handleSort:R,handlePageChange:A,handlePageSizeChange:P,handleSearch:T}=W(u),z=[{key:"name",label:"Role Name",sortable:!0},{key:"permissions",label:"Permissions",sortable:!1,render:e=>{let s=Array.isArray(e.permissions)?e.permissions:[];return(0,a.jsx)("div",{className:"flex flex-wrap gap-1 max-h-20 overflow-y-auto",children:s.map(e=>(0,a.jsx)("span",{className:"bg-secondary text-secondary-foreground px-2 py-1 rounded-md text-xs capitalize",title:e.description,children:e.name.replace(/_/g," ")},e._id))})}},{key:"actions",label:"Actions",sortable:!1,render:e=>(0,a.jsx)(eh,{role:e,onUpdate:()=>{m({...e,permissions:e.permissions.map(e=>e.name)}),s(!0)},onDelete:j})}];return(0,a.jsxs)(n,{children:[(0,a.jsxs)(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(o,{className:"text-2xl font-bold",children:"Role Management"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(t?"w-64 mr-2":"w-0"),children:(0,a.jsx)(p,{placeholder:"Search by role name",value:E,onChange:e=>T(e.target.value),className:"w-full"})}),(0,a.jsx)(f,{variant:"ghost",size:"icon",onClick:()=>{i(!t)},"aria-label":"Search",children:(0,a.jsx)(et.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(f,{onClick:()=>{m(null),s(!0)},children:"Add Role"})]})]}),(0,a.jsxs)(d,{children:[E&&(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Search Results"}),(0,a.jsx)(U,{data:v,columns:z,isLoading:h||b,sortConfig:N,onSort:R,currentPage:w,totalPages:S,onPageChange:A,pageSize:k,onPageSizeChange:P,totalItems:C})]}),(0,a.jsx)(eE,{isOpen:e,onClose:()=>s(!1),onAdd:x,onUpdate:g,roleToEdit:c})]})}let eA=e=>{let{group:s,permission:t,onUpdate:i,onDelete:n}=e,[l,o]=(0,r.useState)(!1);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(f,{variant:"outline",size:"sm",onClick:()=>i(s.group,t),children:"Edit"}),(0,a.jsx)(f,{variant:"destructive",size:"sm",onClick:()=>o(!0),children:"Delete"})]}),(0,a.jsx)(ei,{open:l,onOpenChange:o,children:(0,a.jsxs)(eo,{children:[(0,a.jsxs)(ed,{children:[(0,a.jsx)(em,{children:"Are you sure you want to delete this permission?"}),(0,a.jsxs)(eu,{children:['This action cannot be undone. This will permanently delete the permission "',t.name,'“ from the "',s.group,"“ group."]})]}),(0,a.jsxs)(ec,{children:[(0,a.jsx)(ep,{children:"Cancel"}),(0,a.jsx)(ef,{onClick:()=>{n(s.id,t._id),o(!1)},children:"Delete"})]})]})})]})};var eP=t(2431);function eT(e){let{isOpen:s,onClose:t,onAdd:i,onUpdate:n,initialGroup:l,initialPermission:o}=e,[d,c]=(0,r.useState)({group:"",name:"",description:""}),[m,u]=(0,r.useState)(!1),[h,x]=(0,r.useState)(!1),{toast:g}=(0,Z.dj)();(0,r.useEffect)(()=>{o?(c({group:l.group||"",name:o.name||"",description:o.description||""}),u(!0)):(c({group:"",name:"",description:""}),u(!1))},[o,l]),(0,r.useEffect)(()=>{s||(c({group:"",name:"",description:""}),u(!1))},[s]);let j=async()=>{if(!d.group||!d.name){g({title:"Error",description:"Group and Name are required",variant:"destructive"});return}x(!0);try{let e={group:d.group,permissions:[{name:d.name,description:d.description}]};m?(await n({permissionId:o._id,...e}),g({title:"Success",description:'Permission "'.concat(d.name,'" updated successfully'),variant:"default",className:"bg-green-500 text-white"})):(await i(e),g({title:"Success",description:'Permission "'.concat(d.name,'" added successfully'),variant:"default",className:"bg-green-500 text-white"})),t()}catch(e){g({title:"Error",description:"Failed to ".concat(m?"update":"add",' permission "').concat(d.name,'": ').concat(e.message),variant:"destructive",action:(0,a.jsx)(eP.Qg,{altText:"Try again",children:"Try again"})})}finally{x(!1)}};return(0,a.jsx)(O,{open:s,onOpenChange:t,children:(0,a.jsxs)(M,{className:"sm:max-w-[425px]",children:[(0,a.jsx)(I,{children:(0,a.jsx)(V,{children:m?"Edit Permission":"Add New Permission"})}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(Y,{htmlFor:"group",className:"text-right",children:"Group"}),(0,a.jsxs)(C,{value:d.group,onValueChange:e=>c({...d,group:e}),disabled:m,children:[(0,a.jsx)(E,{className:"col-span-3",children:(0,a.jsx)(S,{placeholder:"Select permission group"})}),(0,a.jsx)(P,{children:["User Management","Role Management","Product Management","Permission Management"].map(e=>(0,a.jsx)(T,{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(Y,{htmlFor:"name",className:"text-right",children:"Name"}),(0,a.jsx)(p,{id:"name",value:d.name,onChange:e=>c({...d,name:e.target.value}),className:"col-span-3",placeholder:"Enter permission name",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(Y,{htmlFor:"description",className:"text-right",children:"Description"}),(0,a.jsx)(p,{id:"description",value:d.description,onChange:e=>c({...d,description:e.target.value}),className:"col-span-3",placeholder:"Enter permission description"})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(f,{onClick:j,disabled:h,children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.A,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Updating...":"Adding..."]}):m?"Update Permission":"Add Permission"})})]})})}function ez(){let[e,s]=(0,r.useState)(!1),[t,i]=(0,r.useState)(null),[c,m]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),{permissions:x,isLoading:g,addPermission:j,updatePermission:y,deletePermission:b}=eS(),{data:v,sortConfig:N,currentPage:w,pageSize:k,totalItems:C,totalPages:S,searchTerm:E,handleSort:R,handlePageChange:A,handlePageSizeChange:P,handleSearch:T}=W(x),z=(e,t)=>{let a=x.find(s=>s.group===e);a&&(i(a),m(t),s(!0))},F=[{key:"group",label:"Group",sortable:!0},{key:"permissions",label:"Permissions",sortable:!1,render:e=>(0,a.jsx)("div",{className:"flex flex-col space-y-2",children:e.permissions.map(s=>(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium capitalize",children:s.name.replace(/_/g," ")}),(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:s.description})]}),(0,a.jsx)(eA,{group:e,permission:s,onUpdate:z,onDelete:b})]},s._id))})}];return(0,a.jsxs)(n,{children:[(0,a.jsxs)(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(o,{className:"text-2xl font-bold",children:"Permission Management"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsx)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(u?"w-64 mr-2":"w-0"),children:(0,a.jsx)(p,{placeholder:"Search by permission name",value:E,onChange:e=>T(e.target.value),className:"w-full"})}),(0,a.jsx)(f,{variant:"ghost",size:"icon",onClick:()=>{h(!u)},"aria-label":"Search",children:(0,a.jsx)(et.A,{className:"h-4 w-4"})})]}),(0,a.jsx)(f,{onClick:()=>s(!0),children:"Add Permission"})]})]}),(0,a.jsxs)(d,{children:[E&&(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Search Results"}),(0,a.jsx)(U,{data:v,columns:F,isLoading:g,sortConfig:N,onSort:R,currentPage:w,totalPages:S,onPageChange:A,pageSize:k,onPageSizeChange:P,totalItems:C})]}),(0,a.jsx)(eT,{isOpen:e,onClose:()=>{s(!1),i(null),m(null)},onAdd:j,onUpdate:y,initialGroup:t,initialPermission:c})]})}var eU=t(7113),eF=t(2823),e_=t(3817),eO=t(8686),eL=t(6710),eD=t(7725),eM=t(2104),eI=t(3643),eV=t(6967),eJ=t(3565);let eq=eI.bL,eY=eI.l9;eI.YJ,eI.ZL,eI.Pb,eI.z6,r.forwardRef((e,s)=>{let{className:t,inset:r,children:n,...l}=e;return(0,a.jsxs)(eI.ZP,{ref:s,className:(0,i.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...l,children:[n,(0,a.jsx)(eV.A,{className:"ml-auto"})]})}).displayName=eI.ZP.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eI.G5,{ref:s,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}).displayName=eI.G5.displayName;let eZ=r.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...n}=e;return(0,a.jsx)(eI.ZL,{children:(0,a.jsx)(eI.UC,{ref:s,sideOffset:r,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});eZ.displayName=eI.UC.displayName;let eH=r.forwardRef((e,s)=>{let{className:t,inset:r,...n}=e;return(0,a.jsx)(eI.q7,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...n})});eH.displayName=eI.q7.displayName,r.forwardRef((e,s)=>{let{className:t,children:r,checked:n,...l}=e;return(0,a.jsxs)(eI.H_,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(eI.VF,{children:(0,a.jsx)(k.A,{className:"h-4 w-4"})})}),r]})}).displayName=eI.H_.displayName,r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(eI.hN,{ref:s,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(eI.VF,{children:(0,a.jsx)(eJ.A,{className:"h-2 w-2 fill-current"})})}),r]})}).displayName=eI.hN.displayName,r.forwardRef((e,s)=>{let{className:t,inset:r,...n}=e;return(0,a.jsx)(eI.JU,{ref:s,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...n})}).displayName=eI.JU.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(eI.wv,{ref:s,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=eI.wv.displayName;let eG=F.bL,eQ=F.l9;F.bm;let eB=F.ZL,eK=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(F.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s})});eK.displayName=F.hJ.displayName;let eX=(0,m.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),eW=r.forwardRef((e,s)=>{let{side:t="right",className:r,children:n,...l}=e;return(0,a.jsxs)(eB,{children:[(0,a.jsx)(eK,{}),(0,a.jsxs)(F.UC,{ref:s,className:(0,i.cn)(eX({side:t}),r),...l,children:[n,(0,a.jsxs)(F.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(_.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});function e$(e){let{activeTab:s,navItems:t,onNavItemClick:i}=e,{theme:n,setTheme:l}=(0,eU.D)(),[o,d]=(0,r.useState)(!1),c=e=>{i(e),d(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 justify-between",children:(0,a.jsxs)("div",{className:"flex h-14 items-center justify-between px-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(f,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>d(!0),children:[(0,a.jsx)(eL.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Open menu"})]}),(0,a.jsx)("h1",{className:"text-lg font-semibold sm:text-xl",children:"Admin Dashboard"})]}),(0,a.jsx)("div",{className:"flex items-end space-x-4",children:(0,a.jsxs)(eq,{children:[(0,a.jsx)(eY,{asChild:!0,children:(0,a.jsxs)(f,{variant:"outline",size:"icon",className:"h-9 w-9",children:[(0,a.jsx)(eD.A,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(eM.A,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,a.jsxs)(eZ,{align:"end",children:[(0,a.jsx)(eH,{onClick:()=>l("light"),children:"Light"}),(0,a.jsx)(eH,{onClick:()=>l("dark"),children:"Dark"}),(0,a.jsx)(eH,{onClick:()=>l("system"),children:"System"})]})]})})]})}),(0,a.jsxs)(eG,{open:o,onOpenChange:d,children:[(0,a.jsx)(eQ,{asChild:!0,style:{display:"none"}}),(0,a.jsx)(eW,{side:"left",className:"w-64",children:(0,a.jsx)("nav",{className:"space-y-2",children:t.map(e=>(0,a.jsxs)(f,{variant:s===e.id?"secondary":"ghost",className:"w-full justify-start",onClick:()=>c(e.id),children:[(0,a.jsx)(e.icon,{className:"mr-2 h-4 w-4"}),e.label]},e.id))})})]})]})}function e0(){return(0,a.jsx)("div",{className:"h-96 w-full rounded-md bg-muted ".concat("before:absolute before:inset-0 before:-translate-x-full before:animate-[shimmer_2s_infinite] before:bg-gradient-to-r before:from-transparent before:via-white/60 before:to-transparent"),children:(0,a.jsx)("span",{className:"sr-only",children:"Loading..."})})}function e1(){let[e,s]=(0,r.useState)("users"),t=[{id:"users",label:"User Management",icon:eF.A},{id:"roles",label:"Role Management",icon:e_.A},{id:"permissions",label:"Permission Management",icon:eO.A}],i=e=>{s(e)};return(0,a.jsx)(eU.N,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:(0,a.jsxs)("div",{className:"min-h-screen bg-background text-foreground",children:[(0,a.jsx)(e$,{activeTab:e,navItems:t,onNavItemClick:i}),(0,a.jsxs)("div",{className:"flex h-[calc(100vh-3.5rem)] overflow-hidden",children:[(0,a.jsx)("aside",{className:"hidden w-64 overflow-y-auto border-r bg-background md:block",children:(0,a.jsx)("nav",{className:"space-y-2 p-4",children:t.map(s=>(0,a.jsxs)(f,{variant:e===s.id?"secondary":"ghost",className:"w-full justify-start",onClick:()=>i(s.id),children:[(0,a.jsx)(s.icon,{className:"mr-2 h-4 w-4"}),s.label]},s.id))})}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)("div",{className:"container mx-auto p-4 md:p-6",children:(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(e0,{}),children:(()=>{switch(e){case"users":return(0,a.jsx)(ea,{});case"roles":return(0,a.jsx)(eR,{});case"permissions":return(0,a.jsx)(ez,{});default:return null}})()})})})]})]})})}eW.displayName=F.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(F.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold text-foreground",t),...r})}).displayName=F.hE.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(F.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})}).displayName=F.VY.displayName},2431:(e,s,t)=>{"use strict";t.d(s,{Qg:()=>f,Sb:()=>h,US:()=>c,aD:()=>x,eC:()=>p,tE:()=>d,y8:()=>u});var a=t(5155),r=t(2115),i=t(9930),n=t(652),l=t(767),o=t(7849);let d=i.Kq,c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.LM,{ref:s,className:(0,o.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...r})});c.displayName=i.LM.displayName;let m=(0,n.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),u=r.forwardRef((e,s)=>{let{className:t,variant:r,...n}=e;return(0,a.jsx)(i.bL,{ref:s,className:(0,o.cn)(m({variant:r}),t),...n})});u.displayName=i.bL.displayName;let f=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.rc,{ref:s,className:(0,o.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...r})});f.displayName=i.rc.displayName;let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.bm,{ref:s,className:(0,o.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...r,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})});p.displayName=i.bm.displayName;let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.hE,{ref:s,className:(0,o.cn)("text-sm font-semibold",t),...r})});h.displayName=i.hE.displayName;let x=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(i.VY,{ref:s,className:(0,o.cn)("text-sm opacity-90",t),...r})});x.displayName=i.VY.displayName},9398:(e,s,t)=>{"use strict";t.d(s,{dj:()=>u});var a=t(2115);let r=0,i=new Map,n=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},l=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function m(e){let{...s}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,s]=a.useState(d);return a.useEffect(()=>(o.push(s),()=>{let e=o.indexOf(s);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},7849:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var a=t(3463),r=t(9795);function i(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}}},e=>{var s=s=>e(e.s=s);e.O(0,[197,920,441,517,358],()=>s(7514)),_N_E=e.O()}]);